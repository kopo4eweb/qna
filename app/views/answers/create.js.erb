<% if @answer&.errors.present? %>
 $('.answers_errors').html('<%= j render 'shared/errors', resource: @answer %>');
<% end %>

<% if @answer.persisted? %>
  $('.answers').append('<%= j render @answer %>');
  $('.new-answer #answer_body').val('');

  var nestedFieldsAnswer = $('.new-answer .add-links .nested-fields');
  if (nestedFieldsAnswer.length) {
    nestedFieldsAnswer.each(function (index){
      if (index === 0) {
        $(this).find('input').val('');
      } else {
        $(this).remove();
      }
    });
  }

  var uploadFilesAnswer = $('.new-answer .upload-files');
  if (uploadFilesAnswer.length) {
    uploadFilesAnswer.find('#answer_files').removeAttr('disabled').val('');
    uploadFilesAnswer.find('.direct-upload').each(function() {
      $(this).remove();
    });
    uploadFilesAnswer.find('input[type=hidden]').each(function() {
      $(this).remove();
    });
  }
<% end %>